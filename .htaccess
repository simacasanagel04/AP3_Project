# .htaccess - Security and Performance Headers for AKSyon Medical Center

# Enable mod_headers if available
<IfModule mod_headers.c>
    # Security Headers
    Header set X-Content-Type-Options "nosniff"
    Header unset X-Powered-By
    Header unset Pragma
    Header unset Expires
    Header unset Host
    
    # Content Security Policy (Basic - adjust as needed)
    Header set Content-Security-Policy "default-src 'self' https://cdn.jsdelivr.net https://fonts.googleapis.com https://fonts.gstatic.com https://res.cloudinary.com https://cdnjs.cloudflare.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com; img-src 'self' data: https://res.cloudinary.com; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net;"
    
    # Set UTF-8 charset for all text content
    <FilesMatch "\.(html|php|js|css|txt)$">
        Header set Content-Type "text/html; charset=UTF-8"
    </FilesMatch>
    
    <FilesMatch "\.js$">
        Header set Content-Type "application/javascript; charset=UTF-8"
    </FilesMatch>
    
    <FilesMatch "\.css$">
        Header set Content-Type "text/css; charset=UTF-8"
    </FilesMatch>
    
    # Cache Control for Static Assets
    <FilesMatch "\.(css|js|jpg|jpeg|png|gif|ico|svg|woff|woff2|ttf|eot)$">
        Header set Cache-Control "public, max-age=31536000, immutable"
    </FilesMatch>
    
    # Cache Control for HTML/PHP (no cache for dynamic content)
    <FilesMatch "\.(html|php)$">
        Header set Cache-Control "no-cache, no-store, must-revalidate"
    </FilesMatch>
</IfModule>

# Enable mod_expires if available
<IfModule mod_expires.c>
    ExpiresActive On
    
    # Images
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
    ExpiresByType image/x-icon "access plus 1 year"
    
    # CSS and JavaScript
    ExpiresByType text/css "access plus 1 year"
    ExpiresByType application/javascript "access plus 1 year"
    ExpiresByType text/javascript "access plus 1 year"
    
    # Fonts
    ExpiresByType font/woff "access plus 1 year"
    ExpiresByType font/woff2 "access plus 1 year"
    ExpiresByType application/font-woff "access plus 1 year"
    ExpiresByType application/font-woff2 "access plus 1 year"
    
    # Default: No caching for HTML/PHP
    ExpiresByType text/html "access plus 0 seconds"
</IfModule>

# Charset for PHP files
AddDefaultCharset UTF-8